<!DOCTYPE html>
<html>
   <head>

      <script type="module" src="scripts/vanilla-tagger.webc.js" async></script>

      <script>

          function greenTagHelper(tag) {
                  alert('The "' + tag.id + '" tag has functions attached to the mouseover/mouseout events via event listeners, and to the click event via the "onclick" trigger in the tag definition');
          };

          function redTagHelper(tag) {
                  let element = tag.element,
                      choice =  (tag.element.classList.contains("shape-marker") ? "a marker icon" : "a marker shape"),
                      question = "Would you like a " + choice + " for this tag?",
                      action = (element.classList.contains("shape-marker") ? "icon" : "shape"),
                      decision = confirm(question);

                      if (decision && action==="shape") {
                          element.classList.remove("icon-marker");
                          element.classList.add("shape-marker");
                      }    
                      else if (decision && action==="icon") {
                          element.classList.add("icon-marker");
                          element.classList.remove("shape-marker");
                      }    
          };


      </script>
  
   </head>
   <body>

      <h1>See source & console for tags configuration & events</h1>

      <vanilla-tagger 
         id="v-tagger"
         data-img='https://images.unsplash.com/photo-1493134799591-2c9eed26201a?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80'
         data-tags='[{
                        "top": 20,
                        "left": 20,
                        "classes": "dot light with-border pulsating-onhover show-index-ontop icon-camera responsive",
                        "link": {"href":"https://www.linkedin.com/in/giuseppepizzimenti/", "target":"_blank"}
                     },{
                      "top": 36.5693,
                      "left": 52.5,
                      "classes": "dot red pulsating",
                      "onclick" : "redTagHelper"           
                     },{
                        "id" : "greenTag",
                        "top": 44.7584,
                        "left": 29.625,
                        "classes": "dot green responsive show-index",
                        "onclick" : "greenTagHelper"
                     },{
                        "top": 12.3792,
                        "left": 68.375,
                        "classes": "dot blue small pulsating"             
                     },{
                        "top": 80,
                        "left": 20,
                        "classes": "dot dark with-border with-shadow show-index"
                     }]'
      >
            Your browser doesn't currently support this component<br>
            <a href="https://browsehappy.com/" target="_blank">Please , update your browser</a>
      </vanilla-tagger>


      <script>
	   	let tagger = document.getElementById("v-tagger");

             tagger.addEventListener('VanillaTagger:componentCreated',function (e) { 
               console.log("Component created: " + e.target.id);
             });

             tagger.addEventListener('VanillaTagger:imgLoaded',function (e) { 
               console.log("Image loaded: " + JSON.stringify(e.detail));
             });

             tagger.addEventListener('VanillaTagger:tagAdded',function (e) { 
               console.log("Tag added: " + JSON.stringify(e.detail));
             });

             tagger.addEventListener('VanillaTagger:tagsLoaded',function (e) { 
               console.log("Tags loaded: " + JSON.stringify(e.detail));
             });

             tagger.addEventListener('VanillaTagger:tagClick',function (e) { 
               console.log("Tag clicked: " + JSON.stringify(e.detail));
             });

             tagger.addEventListener('VanillaTagger:tagMouseover',function (e) { 
               console.log("Tag mouse over: " + JSON.stringify(e.detail));

               const tag = e.detail;
               
               if (tag.id == "greenTag") { 
                   elem = tag.element; 
                   elem.classList.add("pulsating");
               }    
             });

             tagger.addEventListener('VanillaTagger:tagMouseout',function (e) { 
               console.log("Tag mouse out: " + JSON.stringify(e.detail));

               const tag = e.detail;
               
               if (tag.id == "greenTag") { 
                   elem = tag.element; 
                   elem.classList.remove("pulsating");
               }    
             });

      </script>

   </body>
</html